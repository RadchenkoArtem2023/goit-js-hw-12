{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst imgGallery = document.querySelector('.gallery');\nexport const imageTemplate = images => {\n  const markup = images\n    .map(\n      image =>\n        `<li class=\"gallery-item\">\n           <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n             <img\n               class=\"gallery-image\"\n               width=\"1280\"\n               height=\"152\"\n               src=\"${image.webformatURL}\"\n               data-source=\"${image.largeImageURL}\"\n               alt=\"${image.tags}\"\n             />\n             </a>\n             <ul class=\"gallery-description\">\n             <li><h3>Likes</h3><p>${image.likes}</p>\n             </li>\n             <li><h3>Views</h3><p>${image.views}</p>\n               </li>\n               <li><h3>Comments</h3><p>${image.comments}</p>\n                 </li>\n                 <li><h3>Downloads</h3><p>${image.downloads}</p>\n                   </li>\n             </ul>\n           </li>`\n    )\n    .join('');\n\n  imgGallery.insertAdjacentHTML('beforeend', markup);\n  myGallery.refresh();\n};\nconst myGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: true,\n  enableKeyboard: true,\n  docClose: true,\n});\n","import axios from 'axios';\n\nexport async function getImage(inputValue, page) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = new URLSearchParams({\n    key: '42962590-b9bb006e5b1e7f6cfce132ccb',\n    q: inputValue,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  });\n  const url = `${BASE_URL}${END_POINT}?${params}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error('Error fetching images');\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getImage } from './js/pixabay-api';\nimport { imageTemplate } from './js/render-functions';\nconst formEl = document.querySelector('.form');\nconst imgGallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loader = document.querySelector('.loader');\nlet searchQuery = '';\nlet currentPage = 1;\nlet lightboxInstance = null; // створив екземпляр SimpleLightbox глобально\nconst showLoader = () => {\n  loader.style.display = 'block';\n};\nconst hideLoader = () => {\n  loader.style.display = 'none';\n};\nconst showErrorToast = () => {\n  iziToast.error({\n    maxWidth: '432px',\n    height: '48px',\n    color: 'red',\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n};\n//викликав метод refresh()\nconst displayImages = data => {\n  imageTemplate(data.hits);\n\n  // imgGallery.innerHTML += markup;\n  // if (!lightboxInstance) {\n  //   lightboxInstance = new SimpleLightbox('.gallery a', {});\n  // } else {\n  //   lightboxInstance.refresh();\n  // }\n};\nconst handleFormSubmit = async event => {\n  event.preventDefault();\n  imgGallery.innerHTML = '';\n  currentPage = 1;\n  searchQuery = event.currentTarget.elements.image.value.trim();\n  if (!searchQuery) {\n    iziToast.error({\n      color: 'yellow',\n      message: 'Please fill in the field for search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n  // clear Load more\n  loadMoreBtn.style.display = 'none';\n  showLoader();\n  try {\n    const data = await getImage(searchQuery, currentPage);\n    if (data.hits.length === 0) {\n      showErrorToast();\n      return;\n    }\n    displayImages(data);\n    if (data.totalHits > 15) {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    showErrorToast();\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n};\nconst handleLoadMore = async () => {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await getImage(searchQuery, currentPage);\n    displayImages(data);\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        color: 'yellow',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n    smoothScroll();\n  } catch (error) {\n    showErrorToast();\n  } finally {\n    hideLoader();\n  }\n};\nformEl.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleLoadMore);\nfunction smoothScroll() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const cardHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["imgGallery","imageTemplate","images","markup","image","myGallery","SimpleLightbox","getImage","inputValue","page","BASE_URL","END_POINT","params","url","axios","formEl","loadMoreBtn","loader","searchQuery","currentPage","showLoader","hideLoader","showErrorToast","iziToast","displayImages","data","handleFormSubmit","event","handleLoadMore","smoothScroll","cardHeight"],"mappings":"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"}